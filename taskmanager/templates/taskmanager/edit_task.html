{% extends "taskmanager/base.html" %}

{% block title %}Редактировать задачу{% endblock %}

{% block body %}
<div class="container mt-5">
    <h2 class="mb-4">Редактировать задачу: {{ task.title }}</h2>

    <!-- Форма для редактирования задачи -->
    <form method="post" class="bg-light p-4 rounded shadow-sm">
        {% csrf_token %}

        <!-- Поле "Заголовок" -->
        <div class="form-group mb-3">
            <label for="{{ form.title.id_for_label }}" class="form-label">Заголовок:</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="text-danger">
                    {{ form.title.errors }}
                </div>
            {% endif %}
        </div>

        <!-- Поле "Описание" -->
        <div class="form-group mb-3">
            <label for="{{ form.description.id_for_label }}" class="form-label">Описание:</label>
            {{ form.description }}
            {% if form.description.errors %}
                <div class="text-danger">
                    {{ form.description.errors }}
                </div>
            {% endif %}
        </div>

        <!-- Поле "Срок выполнения" -->
        <div class="form-group mb-3">
            <label for="{{ form.due_date.id_for_label }}" class="form-label">Срок выполнения:</label>
            <input type="datetime-local"
                   name="{{ form.due_date.name }}"
                   id="{{ form.due_date.id_for_label }}"
                   class="form-control"
                   value="{{ form.due_date.value|date:'Y-m-d\TH:i'|default_if_none:'' }}">
            {% if form.due_date.errors %}
                <div class="text-danger">
                    {{ form.due_date.errors }}
                </div>
            {% endif %}
        </div>

        <!-- Поле "Приоритет" -->
        <div class="form-group mb-3">
            <label for="{{ form.priority.id_for_label }}" class="form-label">Приоритет:</label>
            {{ form.priority }}
            {% if form.priority.errors %}
                <div class="text-danger">
                    {{ form.priority.errors }}
                </div>
            {% endif %}
        </div>

        <!-- Поле "Статус" -->
        <div class="form-group mb-3">
            <label for="{{ form.status.id_for_label }}" class="form-label">Статус:</label>
            {{ form.status }}
            {% if form.status.errors %}
                <div class="text-danger">
                    {{ form.status.errors }}
                </div>
            {% endif %}
        </div>

        <!-- Поле "Проект" -->
        <div class="form-group mb-3">
            <label for="{{ form.project.id_for_label }}" class="form-label">Проект:</label>
            {{ form.project }}
            {% if form.project.errors %}
                <div class="text-danger">
                    {{ form.project.errors }}
                </div>
            {% endif %}
        </div>

        <!-- Поле "Категория" -->
        <div class="form-group mb-3">
            <label for="{{ form.category.id_for_label }}" class="form-label">Категория:</label>
            {{ form.category }}
            {% if form.category.errors %}
                <div class="text-danger">
                    {{ form.category.errors }}
                </div>
            {% endif %}
        </div>

        <!-- Поле "Ответственный" -->
        <div class="form-group mb-3">
            <label for="{{ form.assigned_to.id_for_label }}" class="form-label">Ответственный:</label>
            {{ form.assigned_to }}
            {% if form.assigned_to.errors %}
                <div class="text-danger">
                    {{ form.assigned_to.errors }}
                </div>
            {% endif %}
        </div>

        <!-- Кнопки -->
        <div class="form-group mt-4">
            <button type="submit" class="btn btn-primary">Сохранить</button>
            <a href="{% url 'taskmanager:task_detail' task.id %}" class="btn btn-secondary">Отмена</a>
        </div>
    </form>
</div>
{% endblock %}